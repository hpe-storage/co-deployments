---
kind: ConfigMap
apiVersion: v1
metadata:
  name: hpe-linux-config
  namespace: {{ .Release.Namespace }}
data:
{{ if and .Values.node.iscsi.chapUser .Values.node.iscsi.chapPassword }}
  CHAP_USER: {{ .Values.node.iscsi.chapUser  | quote }}
  CHAP_PASSWORD: {{ .Values.node.iscsi.chapPassword  | quote }}
{{- end }}
  config.json: |-
{{ (.Files.Get "files/config.json") | indent 4 }}